<?php $root = (!isset($root)) ? "../../" : $root;require_once($root . "modulos/aplicacion/librerias/Configuracion.cnf.php");//\\//\\//\\//\\//\\//\\//\\ VARIABLES //\\//\\//\\//\\//\\//\\//\\$funcion = @$_REQUEST['funcion'];//$funcion["cuerpo"]=urlencode($funcion["cuerpo"]);$transaccion = @$_REQUEST['transaccion'];function combo_estado($selected) { $etiquetas = array("Activa", "Deshabilitada"); $valores = array("ACTIVA", "DESHABILITADA"); $c =new Componentes(); return($c->combo_datos("estado", $etiquetas, $valores, $selected, ""));}function campo($campo, $funcion) { return('<input type="text" name="' . $campo . '" id="' . $campo . '" value="' . $funcion[$campo] . '" class="campo" />');}function area($campo, $columnas, $filas, $ancho, $alto, $funcion) { {  return('<textarea name="' . $campo . '" id="' . $campo . '" cols="' . $columnas . '" rows="' . $filas . '" style="height:' . $alto . ';width:' . $ancho . ';font-size:12px;">' . urldecode($funcion[$campo]) . '</textarea>'); }}$funcion = $funciones->consultar($funcion);if (isset($_REQUEST['accion'])) { if ($_REQUEST['accion'] == "actualizar-funcion") {  $nombre = $_REQUEST['nombre'];  $parametros = $_REQUEST['parametros'];  $cuerpo = urlencode(@$_REQUEST['cuerpo']);  $descripcion = @$_REQUEST['descripcion'];  $estado = $_REQUEST['estado'];  $version = $_REQUEST['version'];  if (!empty($nombre)) {   $funciones->actualizar($funcion['funcion'], 'nombre', $nombre);  }  $funciones->actualizar($funcion['funcion'], 'parametros', $parametros);  if (!empty($cuerpo)) {   $funciones->actualizar($funcion['funcion'], 'cuerpo', (($cuerpo)));  }  if (!empty($descripcion)) {   $funciones->actualizar($funcion['funcion'], 'descripcion', $descripcion);  }  if (!empty($estado)) {   $funciones->actualizar($funcion['funcion'], 'estado', $estado);  }  if (!empty($version)) {   $funciones->actualizar($funcion['funcion'], 'version', ($version + 0.01));  }  $funciones->actualizar($funcion['funcion'], 'modificacion', ($fechas->hoy())); } else { }} else {}$funcion = $funciones->consultar($funcion['funcion']);?><!DOCTYPE html><html lang="en"> <head>  <meta charset="UTF-8">  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  <title>Editor</title>  <style type="text/css" media="screen">   body {    overflow: hidden;        font-size: 12px;    color: #999;   }   #estado{	width: 90px;height: 22px;background-color: #000000;border-color: #333;color: #CCC;border: 1px;margin: 0px;padding:2px;font-size: 14px;font-weight: bold;}   .campo{width: 100%;height: 22px;background-color: #000000;border-color: #333;color: #CCC;border: 1px;margin: 0px;font-size: 14px;font-weight: bold;padding-top: 0px;padding-right: 2px;padding-bottom: 0px;padding-left: 2px;}   #editor { position: absolute;width:100%;margin: 0;top: 28px;bottom: 0;left: 0;right: 0;}   #actualizar{width: 140px;height: 22px;background-color: #000000;border-color: #333;color: #CCC;border: 1px;margin: 0px;padding: 2px;font-size: 14px;font-weight: bold;}   form{margin: 0px;padding: 0px;}  </style> </head> <body bgcolor="#333333">  <?php  //print_r(@$_REQUEST); ?>  <form action="http://200.110.168.178/agb/modulos/aplicacion/transferir.iframe.php?funcion=<?php  echo($_REQUEST['funcion']); ?>" method="post" enctype="application/x-www-form-urlencoded" name="formulario" target="_self" onSubmit="return(transmitir());">   <input name="accion" type="hidden" value="actualizar-funcion" />   <input name="version" type="hidden" value="<?php  echo($funcion['version']); ?>" />   <input id="cuerpo" name="cuerpo" type="hidden" value="" />   <table width="100%"><tr>     <td align="right" valign="middle" width="40">Funcion:</td>     <td><?php  echo(campo("nombre", $funcion)); ?></td>     <td align="right" valign="middle" width="70">Parametros:</td>     <td><?php  echo(campo("parametros", $funcion)); ?></td>     <td align="right" valign="middle" width="45">Estado:</td>     <td width="90"><?php  echo(combo_estado($funcion['estado'])); ?></td>     <td width="140"><input id="actualizar" name="Actualizar" type="submit" value="ACTUALIZAR" ></td>    </tr>   </table>   <pre id="editor"><?php  echo(urldecode($funcion['cuerpo'])); ?></pre>  </form>  <script type="text/javascript" charset="utf-8">   function transmitir() {    cuerpo.value = editor.getValue();    //alert(cuerpo.value);    return(true);   }  </script>  <script src="../../plugins/ace/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>  <script>var editor = ace.edit("editor");   editor.setTheme("ace/theme/twilight");   editor.getSession().setMode("ace/mode/javascript");</script>  <script type="text/javascript">   // Estas funciones son invocadas desde la barra de tareas   function tPosicion() {   }   function tInicial() {   }   function tAnterior() {   }   function tActualizar() {    Demo.Aplicacion_Funcion('<?php  echo(@$_REQUEST['funcion']); ?>');   }   function tSiguiente() {   }   function tFinal() {   }   function tBuscar(texto) {   }   function tGuardar() {    MUI.Notificacion("Guardando...");    //var formulario = document.getElementById("formulario<?php  echo($transaccion); ?>");    //formulario.submit();   }   function tNuevo() {    MUI.Aplicacion_Funciones_Crear();   }  </script> </body></html>